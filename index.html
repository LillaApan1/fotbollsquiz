<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Globalt Fotbollsquiz</title>
<style>
body { font-family: Arial, sans-serif; background:#0b6623; color:white; margin:0; padding:10px; text-align:center; }
.box { background:#1e8f4f; max-width:500px; margin:20px auto; padding:20px; border-radius:12px; }
button { width:100%; padding:12px; margin:8px 0; border:none; border-radius:8px; font-size:16px; cursor:pointer; }
input { width:90%; padding:10px; font-size:16px; border-radius:6px; border:none; }
ol { text-align:left; }
</style>
</head>
<body>

<h1>‚öΩ Globalt Fotbollsquiz</h1>

<div class="box" id="login">
  <p>Ditt namn:</p>
  <input id="username" placeholder="Skriv ditt namn" />
  <button onclick="enterMenu()">Forts√§tt</button>
</div>

<div class="box" id="menu" style="display:none;">
  <h2>V√§lj quiz</h2>
  <button onclick="startQuiz('pl')">Premier League</button>
  <button onclick="startQuiz('vm')">VM</button>
  <button onclick="startQuiz('all')">Allsvenskan</button>
</div>

<div class="box" id="quiz" style="display:none;">
  <h3 id="question"></h3>
  <div id="answers"></div>
  <p id="progress"></p>
</div>

<div class="box" id="result" style="display:none;">
  <h2>Quiz klart!</h2>
  <p id="scoreText"></p>
  <h3>üåç Top 3 i v√§rlden</h3>
  <ol id="top3"></ol>
  <p id="myRank"></p>
  <button onclick="location.reload()">Tillbaka till start</button>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
// üî• KListra in DIN Firebase-config h√§r
const firebaseConfig = {
  apiKey: "DIN_API_KEY",
  authDomain: "DIN_APP.firebaseapp.com",
  projectId: "DITT_PROJECT_ID",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

let user = "";
let quiz = [];
let current = 0;
let score = 0;

const quizzes = {
  pl: [
    {q:"Vilken tr√§nare vann Premier League 2015/16?",a:["Guardiola","Klopp","Ranieri"],c:2},
    {q:"Vilket lag har flest PL-titlar?",a:["Man United","Chelsea","Liverpool"],c:0},
    // (l√§gg till upp till 20)
  ],
  vm: [
    {q:"Vem gjorde flest m√•l i VM 2002?",a:["Ronaldo","Klose","Zidane"],c:0},
    {q:"Vilket land vann VM 1958?",a:["Brasilien","Sverige","Tyskland"],c:0},
  ],
  all: [
    {q:"Vilket lag har flest SM-guld?",a:["AIK","IFK G√∂teborg","Malm√∂ FF"],c:2},
    {q:"Vilket √•r startade Allsvenskan?",a:["1924","1930","1910"],c:0},
  ]
};

function enterMenu(){
  user = document.getElementById('username').value.trim();
  if(!user) return alert('Skriv namn');
  document.getElementById('login').style.display='none';
  document.getElementById('menu').style.display='block';
}

function startQuiz(type){
  quiz = quizzes[type];
  current = 0; score = 0;
  document.getElementById('menu').style.display='none';
  document.getElementById('quiz').style.display='block';
  showQuestion();
}

function showQuestion(){
  let q = quiz[current];
  document.getElementById('question').innerText = q.q;
  document.getElementById('progress').innerText = `Fr√•ga ${current+1} av ${quiz.length}`;
  let aDiv = document.getElementById('answers'); aDiv.innerHTML="";
  q.a.forEach((ans,i)=>{
    let b=document.createElement('button'); b.innerText=ans;
    b.onclick=()=>checkAnswer(i); aDiv.appendChild(b);
  });
}

function checkAnswer(i){
  if(i===quiz[current].c) score++;
  current++;
  current<quiz.length ? showQuestion() : finishQuiz();
}

async function finishQuiz(){
  document.getElementById('quiz').style.display='none';
  document.getElementById('result').style.display='block';
  document.getElementById('scoreText').innerText = `${user}, du fick ${score} po√§ng.`;

  const ref = db.collection('players').doc(user);
  const doc = await ref.get();
  let total = score;
  if(doc.exists) total += doc.data().points;
  await ref.set({ points: total });

  const snap = await db.collection('players').orderBy('points','desc').get();
  let rank=0;
  let top3=document.getElementById('top3'); top3.innerHTML="";
  snap.forEach(d=>{
    rank++;
    if(rank<=3){
      let li=document.createElement('li'); li.innerText=`${d.id} ‚Äì ${d.data().points} po√§ng`;
      top3.appendChild(li);
    }
    if(d.id===user){ document.getElementById('myRank').innerText=`Din plats: #${rank} ‚Äì ${d.data().points} po√§ng`; }
  });
}
</script>
</body>
</html>
const firebaseConfig = {
    apiKey: "AIzaSyBApn2aTw1V7smbRbtwyvdDpD1iBJvzcY0",
    authDomain: "global-football-quiz.firebaseapp.com",
    projectId: "global-football-quiz",