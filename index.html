<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fotbollsquiz</title>

<link rel="manifest" href="/fotbollsquiz/manifest.json">
<meta name="theme-color" content="#22c55e">

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("service-worker.js").then(reg => {

    reg.addEventListener("updatefound", () => {
      const newWorker = reg.installing;

      newWorker.addEventListener("statechange", () => {
        if (newWorker.state === "installed" && navigator.serviceWorker.controller) {
          document.getElementById("updateBanner").style.display = "block";
        }
      });
    });

    document.getElementById("updateBtn").onclick = () => {
      if (reg.waiting) {
        reg.waiting.postMessage({ type: "SKIP_WAITING" });
      }
    };
  });
}

</script>

<style>
body {
  margin:0;
  font-family: Arial;
  background: linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
}
.box {
  max-width:500px;
  margin:50px auto;
  background:rgba(0,0,0,0.6);
  padding:25px;
  border-radius:15px;
}
button {
  width:100%;
  padding:12px;
  margin:8px 0;
  font-size:16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
}
button:hover { opacity:0.9; }
input {
  width:100%;
  padding:12px;
  font-size:16px;
  border-radius:8px;
  border:none;
}
/* üì± MOBIL-LAYOUT DELUXE */
@media (max-width: 600px) {

  body {
    padding: 0;
    margin: 0;
  }

  .box {
    width: 92%;
    margin: 12px auto;
    padding: 18px;
    border-radius: 16px;
  }

  h1 {
    font-size: 22px;
    margin-top: 12px;
  }

  h2, h3 {
    font-size: 18px;
  }

  button {
    font-size: 18px;
    padding: 16px;
    border-radius: 12px;
    margin: 10px 0;
  }

  #question {
    font-size: 20px;
    line-height: 1.4;
    margin-bottom: 12px;
  }

  #progress {
    font-size: 14px;
    opacity: 0.9;
  }

  input {
    font-size: 18px;
    padding: 14px;
  }

}

</style>
</head>

<body>

<div id="updateBanner" style="
  display:none;
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#22c55e;
  color:#000;
  padding:12px;
  text-align:center;
  z-index:9999;
">
  En ny version finns!
  <button onclick="updateApp()" style="
    margin-left:10px;
    padding:6px 12px;
    border:none;
    border-radius:6px;
    font-weight:bold;
    cursor:pointer;
  ">
    Uppdatera
  </button>
</div>

<div id="login" class="box">
  <h2>Skriv ditt namn</h2>
  <input id="username" placeholder="Ditt namn">
  <button id="startBtn">Forts√§tt</button>
</div>

<div id="menu" class="box" style="display:none;">
  <h2>V√§lj quiz</h2>
  <button onclick="startQuiz('pl')">Premier League</button>
  <button onclick="startQuiz('vm')">VM</button>
  <button onclick="startQuiz('as')">Allsvenskan</button>
  <button onclick="startQuiz('sa')">Serie A</button>
  <button onclick="startQuiz('ll')">La Liga</button>
  <button onclick="startQuiz('bl')">Bundesliga</button>
  <button onclick="startQuiz('l1')">Ligue 1</button>
  <button onclick="startQuiz('cl')">Champions League</button>
  <button onclick="startQuiz('em')">EM</button>

</div>

<div id="quiz" class="box" style="display:none;">
  <h3 id="progress"></h3>
  <h2 id="question"></h2>
  <div id="answers"></div>
</div>

<div id="result" class="box" style="display:none;">
  <h2 id="scoreText"></h2>
  <h3>üèÜ Topp 3 i v√§rlden</h3>
  <ol id="top3"></ol>
  <p id="myRank"></p>
  <button onclick="backToMenu()">Spela ett annat quiz</button>
</div>

<script>
/* ================= FIREBASE ================= */

const firebaseConfig = {
  apiKey: "AIzaSyBApn2aTw1V7smbRbtwyvdDpD1iBJvzcY0",
  authDomain: "global-football-quiz.firebaseapp.com",
  projectId: "global-football-quiz",
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* ================= QUIZDATA ================= */

const quizzes = {
pl: [
  {q:"Vilket lag vann Premier League 2015/16?",a:["Chelsea","Leicester","Arsenal","Tottenham"],c:1},
  {q:"Flest m√•l under en PL-s√§song?",a:["Salah","Haaland","Su√°rez","Kane"],c:1},
  {q:"Vilket lag har flest PL-titlar?",a:["Man United","Chelsea","Man City","Arsenal"],c:0},
  {q:"Vem gjorde m√•let som s√§krade Man Citys titel 2012?",a:["Ag√ºero","Silva","Tour√©","D≈æeko"],c:0},
  {q:"Vilket lag √•kte ur PL 2007/08 trots 40 po√§ng?",a:["Birmingham","Reading","Derby","Fulham"],c:1},
  {q:"üî• F√∂rsta utl√§ndska spelaren som blev PL-skyttekung?",a:["Cantona","Henry","Bergkamp","Zola"],c:0,hard:true},
  {q:"üî• Vilket lag hade 'Invincibles'?",a:["Chelsea","Arsenal","Man United","Liverpool"],c:1,hard:true},
  {q:"üî• Rekord f√∂r flest assist p√• en s√§song?",a:["De Bruyne","Henry","√ñzil","Fabregas"],c:0,hard:true},
  {q:"üî• F√∂rsta laget som vann PL utan att spela i Europa?",a:["Blackburn","Leicester","Chelsea","Arsenal"],c:0,hard:true},
  {q:"üî• Vilken tr√§nare vann flest matcher i PL-historien?",a:["Ferguson","Guardiola","Wenger","Mourinho"],c:0,hard:true},

  {q:"Vilket lag spelar p√• Anfield?",a:["Everton","Liverpool","Leeds","Aston Villa"],c:1},
  {q:"Vilken klubb kallades 'The Invincibles'?",a:["Arsenal","Chelsea","City","Liverpool"],c:0},
  {q:"Vilket √•r startade Premier League?",a:["1992","1988","1995","1990"],c:0},
  {q:"Vem har flest r√∂da kort i PL?",a:["Vieira","Dunne","Keane","Terry"],c:1},
  {q:"Vilket lag vann PL 2020?",a:["Liverpool","City","Chelsea","United"],c:0},
  {q:"Vem √§r PL:s b√§sta m√•lskytt genom tiderna?",a:["Shearer","Kane","Rooney","Lampard"],c:0},
  {q:"Vilken klubb har smeknamnet Spurs?",a:["Arsenal","Tottenham","West Ham","Fulham"],c:1},
  {q:"Vilket lag vann PL flest g√•nger p√• 90-talet?",a:["United","Arsenal","Blackburn","Chelsea"],c:0},
  {q:"Vilken spelare kallas 'King of assists'?",a:["Giggs","De Bruyne","Lampard","Beckham"],c:0},
  {q:"Vilket lag spelar p√• Old Trafford?",a:["Leeds","Man United","Everton","Newcastle"],c:1}
]
,
  vm: [
{q:"Vilket land vann VM 2018?",a:["Frankrike","Kroatien","Brasilien"],c:0},
{q:"Flest VM-m√•l totalt?",a:["Klose","Ronaldo","Pel√©"],c:0},
{q:"VM 2002 vanns av?",a:["Brasilien","Tyskland","Italien"],c:0},
{q:"Vilket land har flest VM-guld?",a:["Brasilien","Tyskland","Italien"],c:0},
{q:"F√∂rsta VM spelades √•r?",a:["1930","1934","1928"],c:0},
{q:"üî• F√∂rsta afrikanska laget till kvartsfinal?",a:["Kamerun","Nigeria","Senegal"],c:0},
{q:"üî• Vem gjorde 'Hand of God'?",a:["Maradona","Pel√©","Messi"],c:0},
{q:"üî• Flest m√•l i ett VM?",a:["Just Fontaine","Klose","Ronaldo"],c:0},
{q:"üî• VM-final 1950 spelades i?",a:["Brasilien","Uruguay","Chile"],c:0},
{q:"üî• Enda landet som spelat alla VM?",a:["Brasilien","Tyskland","Argentina"],c:0},
{q:"Vilket land vann VM 2014?",a:["Tyskland","Brasilien","Argentina"],c:0},
{q:"VM 2010 h√∂lls i?",a:["Sydafrika","Brasilien","Japan"],c:0},
{q:"Vilken spelare vann VM 2022?",a:["Messi","Mbapp√©","Neymar"],c:0},
{q:"Vilket land var v√§rd 2022?",a:["Qatar","UAE","Saudiarabien"],c:0},
{q:"Vilket land vann VM 1998?",a:["Frankrike","Brasilien","Italien"],c:0},
{q:"Vilken spelare gjorde flest m√•l VM 2018?",a:["Kane","Griezmann","Mbapp√©"],c:0},
{q:"VM spelas vart?",a:["4:e √•r","2:e √•r","6:e √•r"],c:0},
{q:"Vilket land slog Brasilien 7‚Äì1?",a:["Tyskland","Frankrike","Nederl√§nderna"],c:0},
{q:"Vilket land vann VM 2006?",a:["Italien","Frankrike","Brasilien"],c:0},
{q:"Vilket lag vann VM 1930?",a:["Uruguay","Argentina","Brasilien"],c:0}
]
,
  as: [
{q:"Vilket lag har flest SM-guld?",a:["Malm√∂ FF","IFK G√∂teborg","AIK"],c:0},
{q:"Allsvenskan startade?",a:["1924","1910","1930"],c:0},
{q:"Vilket lag vann Allsvenskan 2023?",a:["Malm√∂ FF","Elfsborg","H√§cken"],c:1},
{q:"Vilket lag spelar p√• Tele2 Arena?",a:["AIK","Djurg√•rden","B√•da"],c:2},
{q:"Vilket lag kallas Bl√•vitt?",a:["IFK G√∂teborg","IFK Norrk√∂ping","Helsingborg"],c:0},
{q:"üî• Vilket lag vann Allsvenskan 2001?",a:["Hammarby","AIK","Djurg√•rden"],c:0},
{q:"üî• Flest m√•l i Allsvenskan genom tiderna?",a:["Sven Jonasson","Zlatan","Nordahl"],c:0},
{q:"üî• F√∂rsta laget fr√•n Norrland i Allsvenskan?",a:["GIF Sundsvall","√ñstersund","Gefle"],c:0},
{q:"üî• Vilket lag har spelat flest s√§songer?",a:["AIK","IFK G√∂teborg","Malm√∂ FF"],c:0},
{q:"üî• St√∂rsta segern n√•gonsin?",a:["12‚Äì0","11‚Äì1","10‚Äì0"],c:0},
{q:"Vilket lag vann 2020?",a:["Malm√∂ FF","Djurg√•rden","H√§cken"],c:0},
{q:"Vilket lag kallas Bajen?",a:["Hammarby","AIK","Djurg√•rden"],c:0},
{q:"Vilket lag spelar p√• Eleda Stadion?",a:["Malm√∂ FF","Helsingborg","Trelleborg"],c:0},
{q:"Vilket lag vann 2019?",a:["Djurg√•rden","AIK","Malm√∂"],c:0},
{q:"Vilket lag kallas Gnaget?",a:["AIK","Djurg√•rden","Hammarby"],c:0},
{q:"Vilket lag vann 2022?",a:["H√§cken","Malm√∂","Elfsborg"],c:0},
{q:"Vilken stad har flest derbyn?",a:["Stockholm","G√∂teborg","Malm√∂"],c:0},
{q:"Vilket lag spelar p√• Gamla Ullevi?",a:["IFK G√∂teborg","GAIS","B√•da"],c:2},
{q:"Vilket lag vann 2018?",a:["AIK","Malm√∂","Hammarby"],c:0},
{q:"Vilket lag kallas √Ñnglarna?",a:["IFK G√∂teborg","Elfsborg","√ñrebro"],c:0}
]
,
sa: [
{q:"Vilket lag har flest Serie A-titlar?",a:["Juventus","Milan","Inter"],c:0},
{q:"Vilket lag spelar p√• San Siro?",a:["Milan","Inter","B√•da"],c:2},
{q:"Vilket lag kallas Bianconeri?",a:["Juventus","Inter","Roma"],c:0},
{q:"Vem √§r Serie A:s b√§sta m√•lskytt genom tiderna?",a:["Silvio Piola","Totti","Del Piero"],c:0},
{q:"Vilket lag vann Serie A 2023?",a:["Napoli","Inter","Milan"],c:0},
{q:"üî• Vilket √•r grundades Serie A?",a:["1898","1929","1910"],c:1},
{q:"üî• Vilken klubb vann 5 titlar i rad 1930-talet?",a:["Juventus","Torino","Inter"],c:1},
{q:"üî• Vilken stad har tv√• Serie A-lag?",a:["Milano","Rom","B√•da"],c:2},
{q:"üî• Flest m√•l i en Serie A-s√§song?",a:["Higua√≠n","Immobile","Nordahl"],c:0},
{q:"üî• F√∂rsta sydamerikan att vinna skytteligan?",a:["Batistuta","Ronaldo","Tevez"],c:0},
{q:"Vilket lag kallas Giallorossi?",a:["Roma","Lazio","Napoli"],c:0},
{q:"Vilket lag vann 2021?",a:["Inter","Milan","Juventus"],c:0},
{q:"Vilket lag √§r fr√•n Turin?",a:["Juventus","Inter","Roma"],c:0},
{q:"Vilket lag vann 2022?",a:["Milan","Inter","Napoli"],c:0},
{q:"Vilket lag spelar p√• Olimpico?",a:["Roma","Lazio","B√•da"],c:2},
{q:"Vilken f√§rg har Napolis tr√∂jor?",a:["Bl√•","R√∂d","Vit"],c:0},
{q:"Vilket lag har smeknamnet Partenopei?",a:["Napoli","Lazio","Roma"],c:0},
{q:"Vilket lag vann Serie A 2019?",a:["Juventus","Napoli","Inter"],c:0},
{q:"Vilken spelare √§r klubbikon i Roma?",a:["Totti","De Rossi","B√•da"],c:2},
{q:"Vilket lag vann 2020?",a:["Juventus","Inter","Lazio"],c:0}
]
,
ll: [
{q:"Vilket lag har flest La Liga-titlar?",a:["Real Madrid","Barcelona","Atl√©tico"],c:0},
{q:"Vilket lag spelar p√• Camp Nou?",a:["Barcelona","Valencia","Sevilla"],c:0},
{q:"Vilket lag kallas Los Blancos?",a:["Real Madrid","Valencia","Sevilla"],c:0},
{q:"Vilket lag vann La Liga 2023?",a:["Barcelona","Real Madrid","Atl√©tico"],c:0},
{q:"Vilket derby kallas El Cl√°sico?",a:["Real‚ÄìBarca","Madrid‚ÄìAtl√©tico","Sevilla‚ÄìBetis"],c:0},
{q:"üî• Flest m√•l i La Liga-historien?",a:["Messi","Ronaldo","Zarra"],c:0},
{q:"üî• Flest matcher i La Liga?",a:["Zubizarreta","Ra√∫l","Xavi"],c:0},
{q:"üî• Vilken klubb grundades f√∂rst?",a:["Sevilla","Real Madrid","Barcelona"],c:0},
{q:"üî• Vilket lag har vunnit La Liga obesegrade?",a:["Barcelona","Real Madrid","Atl√©tico"],c:0},
{q:"üî• Flest m√•l i en s√§song?",a:["Messi","Ronaldo","Su√°rez"],c:0},
{q:"Vilket lag √§r fr√•n Baskien?",a:["Athletic Bilbao","Villarreal","Getafe"],c:0},
{q:"Vilket lag spelar p√• Wanda Metropolitano?",a:["Atl√©tico","Valencia","Sevilla"],c:0},
{q:"Vilket lag vann 2021?",a:["Atl√©tico","Real","Barca"],c:0},
{q:"Vilken f√§rg har Valencias tr√∂jor?",a:["Vit","Gul","Bl√•"],c:0},
{q:"Vilket lag kallas Colchoneros?",a:["Atl√©tico","Sevilla","Valencia"],c:0},
{q:"Vilket lag vann 2022?",a:["Real Madrid","Barca","Atl√©tico"],c:0},
{q:"Vilket lag √§r fr√•n Galicien?",a:["Celta Vigo","Betis","Osasuna"],c:0},
{q:"Vilket lag spelar p√• Mestalla?",a:["Valencia","Villarreal","Levante"],c:0},
{q:"Vilket lag vann 2019?",a:["Barcelona","Real Madrid","Atl√©tico"],c:0},
{q:"Vilket lag √§r fr√•n Andalusien?",a:["Sevilla","Real Sociedad","Espanyol"],c:0}
]
,
bl: [
{q:"Vilket lag har flest Bundesliga-titlar?",a:["Bayern M√ºnchen","Borussia Dortmund","Werder Bremen"],c:0},
{q:"Vilket lag spelar p√• Signal Iduna Park?",a:["Dortmund","Schalke","Leverkusen"],c:0},
{q:"Vilket lag kallas Die Bayern?",a:["Bayern M√ºnchen","Stuttgart","Hamburg"],c:0},
{q:"Vilket lag vann Bundesliga 2023?",a:["Bayern M√ºnchen","Borussia Dortmund","RB Leipzig"],c:0},
{q:"Vilket lag √§r fr√•n Leipzig?",a:["RB Leipzig","Dynamo Dresden","Union Berlin"],c:0},
{q:"üî• Flest m√•l i Bundesliga-historien?",a:["Gerd M√ºller","Lewandowski","Klose"],c:0},
{q:"üî• Flest m√•l i en Bundesliga-s√§song?",a:["Lewandowski","Gerd M√ºller","Haaland"],c:0},
{q:"üî• Vilket lag vann Bundesliga obesegrade 2014?",a:["Bayern M√ºnchen","Dortmund","Ingen"],c:2},
{q:"üî• Vilket lag har smeknamnet Die Werkself?",a:["Leverkusen","Wolfsburg","Hoffenheim"],c:0},
{q:"üî• F√∂rsta Bundesliga-s√§songen spelades?",a:["1963","1950","1970"],c:0},
{q:"Vilket lag spelar p√• Allianz Arena?",a:["Bayern M√ºnchen","1860 M√ºnchen","B√•da"],c:0},
{q:"Vilket lag kallas Die Schwarzgelben?",a:["Dortmund","Bremen","Schalke"],c:0},
{q:"Vilket lag √§r fr√•n Berlin?",a:["Union Berlin","Leverkusen","Mainz"],c:0},
{q:"Vilket lag vann Bundesliga 2022?",a:["Bayern M√ºnchen","Dortmund","Leipzig"],c:0},
{q:"Vilket lag har smeknamnet Die Fohlen?",a:["M√∂nchengladbach","Freiburg","Augsburg"],c:0},
{q:"Vilket lag √§r fr√•n Hamburg?",a:["Hamburg SV","St. Pauli","B√•da"],c:1},
{q:"Vilket lag spelar p√• Weserstadion?",a:["Werder Bremen","Hamburg","Hannover"],c:0},
{q:"Vilket lag vann Bundesliga 2019?",a:["Bayern M√ºnchen","Dortmund","Leipzig"],c:0},
{q:"Vilket lag √§r k√§nt som Die Adler?",a:["Eintracht Frankfurt","Freiburg","Mainz"],c:0},
{q:"Vilket lag vann Bundesliga 2020?",a:["Bayern M√ºnchen","Leverkusen","Dortmund"],c:0}
]
,
l1: [
{q:"Vilket lag har flest Ligue 1-titlar?",a:["Saint-√âtienne","PSG","Marseille"],c:0},
{q:"Vilket lag spelar p√• Parc des Princes?",a:["PSG","Lyon","Marseille"],c:0},
{q:"Vilket lag vann Ligue 1 2023?",a:["PSG","Lens","Marseille"],c:0},
{q:"Vilket lag kallas Les Parisiens?",a:["PSG","Lille","Monaco"],c:0},
{q:"Vilket lag √§r fr√•n Monaco?",a:["Monaco","Nice","Lyon"],c:0},
{q:"üî• Flest m√•l i Ligue 1-historien?",a:["Delio Onnis","Mbapp√©","Pauleta"],c:0},
{q:"üî• Vilket lag vann Ligue 1 obesegrade 1995?",a:["Nantes","PSG","Marseille"],c:0},
{q:"üî• F√∂rsta s√§songen av Ligue 1 spelades?",a:["1932","1920","1945"],c:0},
{q:"üî• Vilket lag har smeknamnet Les Verts?",a:["Saint-√âtienne","Lyon","Bordeaux"],c:0},
{q:"üî• Flest titlar i rad?",a:["PSG","Lyon","Marseille"],c:1},
{q:"Vilket lag vann 2022?",a:["PSG","Lille","Monaco"],c:0},
{q:"Vilket lag √§r fr√•n Marseille?",a:["Marseille","Nice","Rennes"],c:0},
{q:"Vilket lag spelar p√• Velodrome?",a:["Marseille","PSG","Lyon"],c:0},
{q:"Vilket lag kallas Les Gones?",a:["Lyon","Lille","Nice"],c:0},
{q:"Vilket lag vann 2021?",a:["Lille","PSG","Monaco"],c:0},
{q:"Vilket lag √§r fr√•n Bordeaux?",a:["Bordeaux","Toulouse","Nantes"],c:0},
{q:"Vilket lag vann 2020?",a:["PSG","Lyon","Marseille"],c:0},
{q:"Vilket lag √§r fr√•n Bretagne?",a:["Rennes","Nice","Lens"],c:0},
{q:"Vilket lag spelar p√• Groupama Stadium?",a:["Lyon","PSG","Monaco"],c:0},
{q:"Vilket lag vann Ligue 1 2019?",a:["PSG","Lille","Monaco"],c:0}
]
,
cl: [
  { q:"Vilken klubb har vunnit Champions League flest g√•nger?", a:["Real Madrid","AC Milan","Liverpool","Bayern M√ºnchen"], c:0 },
  { q:"Vad hette turneringen f√∂re 1992?", a:["Europacupen","UEFA-cupen","M√§starserien","Champions Trophy"], c:0 },
  { q:"Vem har gjort flest m√•l i Champions League?", a:["Messi","Ronaldo","Lewandowski","Ra√∫l"], c:1 },
  { q:"Vilken klubb vann Champions League 2023?", a:["Manchester City","Inter","Real Madrid","Bayern"], c:0 },
  { q:"Var spelades finalen 2012?", a:["Wembley","Allianz Arena","San Siro","Camp Nou"], c:1 },
  { q:"Vem avgjorde finalen 1999 i slutminuterna?", a:["Solskj√¶r","Beckham","Giggs","Scholes"], c:0 },
  { q:"Vilken klubb f√∂rlorade med 8‚Äì2 mot Bayern 2020?", a:["Barcelona","Chelsea","PSG","Arsenal"], c:0 },
  { q:"Vilken klubb vann fem raka CL-titlar?", a:["Real Madrid","Ajax","Bayern","Milan"], c:0 },
  { q:"Vem √§r yngsta m√•lskytt i CL?", a:["Bojan","Ansu Fati","Mbapp√©","Bellingham"], c:0 },
  { q:"Vilken klubb stod f√∂r miraklet i finalen 2005?", a:["Liverpool","Milan","Chelsea","Porto"], c:0 },
  { q:"Vilken tr√§nare har flest CL-titlar?", a:["Ancelotti","Guardiola","Ferguson","Mourinho"], c:0 },
  { q:"Vilken klubb spelade Drogba f√∂r 2012?", a:["Chelsea","Marseille","Lyon","Monaco"], c:0 },
  { q:"I vilken stad spelades finalen 2020?", a:["Lissabon","Paris","Istanbul","Madrid"], c:0 },
  { q:"Vilken klubb vann f√∂rsta Champions League?", a:["Marseille","Milan","Porto","Ajax"], c:0 },
  { q:"Vem gjorde det snabbaste CL-m√•let?", a:["Roy Makaay","Messi","Ronaldo","Haaland"], c:0 },
  { q:"Vilken klubb n√•dde finalen 2020?", a:["PSG","Lyon","Leipzig","Atalanta"], c:0 },
  { q:"Vilket land har flest CL-titlar?", a:["Spanien","England","Italien","Tyskland"], c:0 },
  { q:"Vilken klubb vann CL 2021?", a:["Chelsea","Man City","PSG","Bayern"], c:0 },
  { q:"Vem gjorde avg√∂rande m√•let i finalen 2014?", a:["Ramos","Bale","Benzema","Ronaldo"], c:0 },
  { q:"Vilken klubb kallas Los Blancos?", a:["Real Madrid","Valencia","Sevilla","Atletico Madrid"], c:0 }
 ]
 ,
em: [
  { q:"Vilket land har vunnit EM flest g√•nger?", a:["Tyskland","Spanien","Frankrike","Italien"], c:0 },
  { q:"Vem vann EM 2021?", a:["Italien","England","Frankrike","Portugal"], c:0 },
  { q:"Vilket land arrangerade EM 2016?", a:["Frankrike","Tyskland","Spanien","Italien"], c:0 },
  { q:"Vem gjorde segerm√•let i EM-finalen 2016?", a:["Eder","Ronaldo","Griezmann","Payet"], c:0 },
  { q:"Vilket lag vann EM 2004?", a:["Grekland","Portugal","Frankrike","Italien"], c:0 },
  { q:"Vem har gjort flest EM-m√•l?", a:["Cristiano Ronaldo","Platini","M√ºller","Shearer"], c:0 },
  { q:"Vilket land arrangerade EM 1992?", a:["Sverige","Danmark","Tyskland","Frankrike"], c:0 },
  { q:"Vem vann EM 1992?", a:["Danmark","Tyskland","Nederl√§nderna","Italien"], c:0 },
  { q:"Vilket land vann EM 2008?", a:["Spanien","Tyskland","Italien","Frankrike"], c:0 },
  { q:"Vem gjorde m√•l i EM-finalen 2008?", a:["Fernando Torres","Villa","Xavi","Iniesta"], c:0 },
  { q:"Vilket lag f√∂rlorade EM-finalen 2021?", a:["England","Spanien","Frankrike","Tyskland"], c:0 },
  { q:"N√§r inf√∂rdes 24 lag i EM?", a:["2016","2012","2008","2020"], c:0 },
  { q:"Vilket land vann EM 1984?", a:["Frankrike","Tyskland","Spanien","Italien"], c:0 },
  { q:"Vem dominerade EM 1984?", a:["Platini","Zidane","Henry","Cantona"], c:0 },
  { q:"Vilket land vann EM 1988?", a:["Nederl√§nderna","Tyskland","Italien","Frankrike"], c:0 },
  { q:"Vem gjorde volleym√•let i finalen 1988?", a:["Van Basten","Gullit","Bergkamp","Rijkaard"], c:0 },
  { q:"Var spelades EM-finalen 2021?", a:["London","Rom","Berlin","Paris"], c:0 },
  { q:"Vilket land vann f√∂rsta EM 1960?", a:["Sovjetunionen","Spanien","Frankrike","Italien"], c:0 },
  { q:"Vilket land vann EM 1964?", a:["Spanien","Italien","Tyskland","Frankrike"], c:0 },
  { q:"Vilket land vann EM 1968?", a:["Italien","England","Tyskland","Frankrike"], c:0 }
 ]

};

/* ================= VARIABLER ================= */

let user="";
let quiz=[];
let current=0;
let score=0;
let timeLeft=10;
let timer=null;

/* ================= LOGIN ================= */

document.getElementById("startBtn").onclick = () => {
  const name = document.getElementById("username").value.trim();
  if(!name){ alert("Skriv ditt namn"); return; }
  user=name;
  document.getElementById("login").style.display="none";
  document.getElementById("menu").style.display="block";
};

/* ================= QUIZ ================= */

function startQuiz(type){ 
  quiz = [...quizzes[type]]
    .sort(() => Math.random() - 0.5)
    .slice(0, 20);

  current = 0;
  score = 0;

  document.getElementById("menu").style.display = "none";
  document.getElementById("quiz").style.display = "block";

  showQuestion();
}


function showQuestion(){
  clearInterval(timer);
  timeLeft = 10;

  const q = quiz[current];
  document.getElementById("question").innerText = q.q;
  document.getElementById("progress").innerText =
    `Fr√•ga ${current+1} av ${quiz.length} ‚è±Ô∏è ${timeLeft}s`;

  const answers = document.getElementById("answers");
  answers.innerHTML = "";

  const shuffledAnswers = q.a.map((text, index) => ({
    text,
    isCorrect: index === q.c
  })).sort(() => Math.random() - 0.5);

  shuffledAnswers.forEach(ans => {
    const btn = document.createElement("button");
    btn.innerText = ans.text;
    btn.onclick = () => answer(ans.isCorrect);
    answers.appendChild(btn);
  });

  timer = setInterval(() => {
    timeLeft--;
    document.getElementById("progress").innerText =
      `Fr√•ga ${current+1} av ${quiz.length} ‚è±Ô∏è ${timeLeft}s`;
    if (timeLeft <= 0) {
      clearInterval(timer);
      next();
    }
  }, 1000);
}

function answer(isCorrect){
  if(isCorrect){
    score++;
  }
  current++;
  if(current < quiz.length){
    showQuestion();
  } else {
    finish();
  }
}

function next(){
  current++;
  current<quiz.length ? showQuestion() : finish();
}

/* ================= RESULT ================= */

async function finish(){
  document.getElementById("quiz").style.display="none";
  document.getElementById("result").style.display="block";
let percent = Math.round((score / quiz.length) * 100);
  document.getElementById('scoreText').innerText =
  `${user}, du fick ${score} po√§ng (${percent} % r√§tt).`;


  const ref=db.collection("players").doc(user);
  const snap=await ref.get();
  let total=score;
  if(snap.exists) total+=snap.data().points;
  await ref.set({points:total});

  const list=await db.collection("players")
    .orderBy("points","desc").get();

  let rank=0;
  const top3=document.getElementById("top3");
  top3.innerHTML="";

  list.forEach(d=>{
    rank++;
    if(rank<=3){
      const li=document.createElement("li");
      li.innerText=`${d.id} ‚Äì ${d.data().points} po√§ng`;
      top3.appendChild(li);
    }
    if(d.id===user){
      document.getElementById("myRank").innerText=
        `Din plats i v√§rlden: #${rank} (${d.data().points} po√§ng)`;
    }
  });
}
function backToMenu() {
  current = 0;
  score = 0;
  quiz = [];

  document.getElementById('result').style.display = 'none';
  document.getElementById('menu').style.display = 'block';
}

let newWorker;

if ("serviceWorker" in navigator) {
  navigator.serviceWorker.addEventListener("controllerchange", () => {
    window.location.reload();
  });

  navigator.serviceWorker.ready.then(reg => {
    if (reg.waiting) {
      showUpdate();
      newWorker = reg.waiting;
    }

    reg.addEventListener("updatefound", () => {
      newWorker = reg.installing;
      newWorker.addEventListener("statechange", () => {
        if (newWorker.state === "installed" && navigator.serviceWorker.controller) {
          showUpdate();
        }
      });
    });
  });
}

function showUpdate() {
  document.getElementById("updateBanner").style.display = "block";
}

function updateApp() {
  if (newWorker) {
    newWorker.postMessage({ type: "SKIP_WAITING" });
  }
}


</script>
<div id="updateBanner" style="
  display:none;
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  background:#222;
  color:white;
  padding:12px;
  text-align:center;
  z-index:9999;">
  Ny version tillg√§nglig üîÑ
  <button onclick="updateApp()" style="margin-left:10px;">Uppdatera</button>
</div>
</body>
</html>